/*!
 * cake-hash
 * CakePHP in Utility.Hash class like a collection manipulation. In JavaScript.
 * 
 * @author tsuyoshiwada
 * @homepage https://github.com/tsuyoshiwada/cake-hash
 * @license MIT
 * @version 0.0.1
 */
!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function CakeHash(){}function checkGlobal(value){return value&&value.Object===Object?value:null}var _get=require("./get"),_get2=_interopRequireDefault(_get),_extract=require("./extract"),_extract2=_interopRequireDefault(_extract),_insert=require("./insert"),_insert2=_interopRequireDefault(_insert),_remove=require("./remove"),_remove2=_interopRequireDefault(_remove),_combine=require("./combine"),_combine2=_interopRequireDefault(_combine),_check=require("./check"),_check2=_interopRequireDefault(_check),_flatten=require("./flatten"),_flatten2=_interopRequireDefault(_flatten),_expand=require("./expand"),_expand2=_interopRequireDefault(_expand),_map=require("./map"),_map2=_interopRequireDefault(_map),_reduce=require("./reduce"),_reduce2=_interopRequireDefault(_reduce),VERSION="0.0.1";CakeHash.VERSION=VERSION,CakeHash.get=_get2["default"],CakeHash.extract=_extract2["default"],CakeHash.insert=_insert2["default"],CakeHash.remove=_remove2["default"],CakeHash.combine=_combine2["default"],CakeHash.check=_check2["default"],CakeHash.flatten=_flatten2["default"],CakeHash.expand=_expand2["default"],CakeHash.map=_map2["default"],CakeHash.reduce=_reduce2["default"];var objectTypes={"function":!0,object:!0},_exports=objectTypes["undefined"==typeof exports?"undefined":_typeof(exports)]&&exports&&!exports.nodeType?exports:null,_module=objectTypes["undefined"==typeof module?"undefined":_typeof(module)]&&module&&!module.nodeType?module:null,_global=checkGlobal(_exports&&_module&&"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global),_self=checkGlobal(objectTypes["undefined"==typeof self?"undefined":_typeof(self)]&&self),_window=checkGlobal(objectTypes["undefined"==typeof window?"undefined":_typeof(window)]&&window),_moduleExports=_module&&_module.exports===_exports?_exports:null,_this=checkGlobal(objectTypes[_typeof(void 0)]&&void 0),root=_global||_window!==(_this&&_this.window)&&_window||_self||_this||Function("return this")();(_window||_self||{}).CakeHash=CakeHash,"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd?define(function(){return CakeHash}):_exports&&_module?_moduleExports?(_module.exports=CakeHash).CakeHash=CakeHash:_exports.CakeHash=CakeHash:root.CakeHash=CakeHash}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./check":2,"./combine":3,"./expand":4,"./extract":5,"./flatten":6,"./get":7,"./insert":8,"./map":9,"./reduce":10,"./remove":11}],2:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function check(data,path){var results=(0,_extract2["default"])(data,path);return Core.isCollection(results)?!Core.empty(results):null!=results}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=check;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_extract=require("./extract"),_extract2=_interopRequireDefault(_extract)},{"./extract":5,"./utils/core":13}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function combine(data,keyPath){var valuePath=arguments.length<=2||void 0===arguments[2]?null:arguments[2],groupPath=arguments.length<=3||void 0===arguments[3]?null:arguments[3];if(Core.empty(data))return[];var keys=(0,_extract2["default"])(data,keyPath),vals=void 0;if(Core.empty(keys))return[];if(Core.empty(valuePath)||(vals=(0,_extract2["default"])(data,valuePath)),Core.empty(vals)&&(vals=Collection.arrayFill(0,keys.length,null)),keys.length!==vals.length)return[];if(null!=groupPath){var group=(0,_extract2["default"])(data,groupPath);if(!Core.empty(group)){for(var c=keys.length,out={},i=0;c>i;i++)null!=group[i]&&Collection.hasProp(group,i)||(group[i]=0),null!=out[group[i]]&&Collection.hasProp(out,group[i])||(out[group[i]]={}),out[group[i]][keys[i]]=vals[i];return Collection.objToArray(out)}}return Core.empty(vals)?[]:Collection.arrayCombine(keys,vals)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=combine;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection),_extract=require("./extract"),_extract2=_interopRequireDefault(_extract)},{"./extract":5,"./utils/collection":12,"./utils/core":13}],4:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function expand(data){var separator=arguments.length<=1||void 0===arguments[1]?".":arguments[1],results={};return Collection.each(data,function(value,flat){var keys=(flat+"").split(separator).reverse(),child={};child[keys.shift()]=value,Collection.each(keys,function(k){child=_defineProperty({},k,child)}),results=Collection.merge(results,child,!0)}),Collection.objToArray(results)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=expand;var _collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection)},{"./utils/collection":12}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function extract(data,path){if(!Core.isCollection(data))return null;if(Core.empty(path))return data;if(!/[{\[]/.test(path))return(0,_get2["default"])(data,path,null);var key="__set_item__",tokens=void 0,context=_defineProperty({},key,[data]);return tokens=path.indexOf("[")<0?path.split("."):Text.tokenize(path,".","[","]"),Collection.each(tokens,function(token){var next=[],_Text$splitConditions=Text.splitConditions(token),_Text$splitConditions2=_slicedToArray(_Text$splitConditions,2),_token=_Text$splitConditions2[0],conditions=_Text$splitConditions2[1];Collection.each(context[key],function(item){Collection.each(item,function(v,k){Text.matchToken(k,_token)&&next.push(v)})}),conditions&&!function(){var filter=[];Collection.each(next,function(item){Core.isCollection(item)&&Text.matches(item,conditions)&&filter.push(item)}),next=filter}(),context=_defineProperty({},key,next)}),context[key]}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=extract;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection),_text=require("./utils/text"),Text=_interopRequireWildcard(_text),_get=require("./get"),_get2=_interopRequireDefault(_get)},{"./get":7,"./utils/collection":12,"./utils/core":13,"./utils/text":14}],6:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function flatten(data){var separator=arguments.length<=1||void 0===arguments[1]?".":arguments[1];return _flatten(data,separator)}function _flatten(input,separator){var currentPath=arguments.length<=2||void 0===arguments[2]?null:arguments[2],results={},path=null;return Core.isArray(input)&&0===input.length?(path=null==currentPath?0:currentPath,results[path]=input,results):(Collection.each(input,function(val,key){if(path=null==currentPath?key:""+currentPath+separator+key,Core.isCollection(val)){var children=_flatten(val,separator,path);Object.keys(children).length>0&&(results=Collection.merge(results,children))}else void 0!==val&&(results[path]=val)}),Collection.objToArray(results))}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=flatten;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection)},{"./utils/collection":12,"./utils/core":13}],7:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function get(data,path){var defaultValue=arguments.length<=2||void 0===arguments[2]?null:arguments[2],parts=void 0,val=void 0;if(!Core.isCollection(data))return defaultValue;if(Core.empty(data)||null==path||""===path)return defaultValue;if(Core.isString(path)||Core.isNumeric(path))parts=(path+"").split(".");else{if(!Core.isArray(path))return defaultValue;parts=path}return val=Core.isCollection(data)?Collection.clone(data):data,Collection.each(parts,function(v){return Core.isCollection(val)&&Collection.hasProp(val,v)?void(val=val[v]):(val=defaultValue,!1)}),val}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=get;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection)},{"./utils/collection":12,"./utils/core":13}],8:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function insert(data,path){var value=arguments.length<=2||void 0===arguments[2]?null:arguments[2],noTokens=path.indexOf("[")<0;if(noTokens&&path.indexOf(".")<0)return data[path]=value,data;var tokens=void 0;if(tokens=noTokens?path.split("."):Text.tokenize(path,".","[","]"),noTokens&&path.indexOf("{")<0)return Collection.simpleOp("insert",data,tokens,value);var token=tokens.shift(),nextPath=tokens.join("."),_Text$splitConditions=Text.splitConditions(token),_Text$splitConditions2=_slicedToArray(_Text$splitConditions,2),_token=_Text$splitConditions2[0],conditions=_Text$splitConditions2[1];return Collection.each(data,function(v,k){Text.matchToken(k,_token)&&(!conditions||Text.matches(v,conditions))&&(data[k]=nextPath?insert(v,nextPath,value):Collection.merge(v,value))}),data}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=insert;var _collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection),_text=require("./utils/text"),Text=_interopRequireWildcard(_text)},{"./utils/collection":12,"./utils/text":14}],9:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function map(data,path,callback){var values=Collection.objToArray((0,_extract2["default"])(data,path));return Core.isArray(values)?values.map(callback):null}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=map;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection),_extract=require("./extract"),_extract2=_interopRequireDefault(_extract)},{"./extract":5,"./utils/collection":12,"./utils/core":13}],10:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function reduce(data,path,callback){var values=Collection.objToArray((0,_extract2["default"])(data,path));return Core.isArray(values)?values.reduce(callback):null}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=reduce;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection),_extract=require("./extract"),_extract2=_interopRequireDefault(_extract)},{"./extract":5,"./utils/collection":12,"./utils/core":13}],11:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function remove(data,path){var noTokens=path.indexOf("[")<0,noExpansion=path.indexOf("{")<0;if(noExpansion&&noTokens&&path.indexOf(".")<0)return delete data[path],data;var tokens=noTokens?path.split("."):Text.tokenize(path,".","[","]");if(noExpansion&&noTokens)return Collection.simpleOp("remove",data,tokens);var token=tokens.shift(),nextPath=tokens.join("."),_Text$splitConditions=Text.splitConditions(token),_Text$splitConditions2=_slicedToArray(_Text$splitConditions,2),_token=_Text$splitConditions2[0],conditions=_Text$splitConditions2[1];return Collection.each(data,function(v,k){var match=Text.matchToken(k,_token);match&&Core.isCollection(v)?(conditions?Text.matches(v,conditions)&&(nextPath?data[k]=remove(v,nextPath):delete data[k]):data[k]=remove(v,nextPath),Core.empty(data[k])&&delete data[k]):match&&Core.empty(nextPath)&&delete data[k]}),data}var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=remove;var _core=require("./utils/core"),Core=_interopRequireWildcard(_core),_collection=require("./utils/collection"),Collection=_interopRequireWildcard(_collection),_text=require("./utils/text"),Text=_interopRequireWildcard(_text)},{"./utils/collection":12,"./utils/core":13,"./utils/text":14}],12:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function hasProp(obj,key){return obj&&obj.hasOwnProperty(key)}function clone(obj){var _isArray=Core.isArray(obj),_isObject=Core.isObject(obj);if(_isArray||_isObject){var result=_isArray?[]:{},key=void 0,val=void 0;for(key in obj)hasProp(obj,key)&&(val=obj[key],Core.isCollection(val)&&(val=clone(val)),result[key]=val);return result}}function merge(obj,source){var deep=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return each(source,function(value,key){deep&&hasProp(obj,key)&&Core.isCollection(value)?merge(obj[key],value,deep):obj[key]=value}),obj}function each(obj,iterate,context){if(null==obj)return obj;if(context=context||obj,Core.isObject(obj)){for(var key in obj)if(hasProp(obj,key)&&iterate.call(context,obj[key],key)===!1)break}else if(Core.isArray(obj)){var i=void 0,length=obj.length;for(i=0;length>i&&iterate.call(context,obj[i],i)!==!1;i++);}return obj}function arrayCombine(keys,values){var data={},keyCount=keys&&keys.length,i=0,key=void 0;if(!(Core.isCollection(keys)&&Core.isCollection(values)&&Core.isNumber(keyCount)&&Core.isNumber(values.length)&&keyCount))return null;if(keyCount!==values.length)return null;for(i=0;keyCount>i;i++)key=keys[i],Core.isInteger(key)&&(key=parseInt(key,10)),data[key]=values[i];return objToArray(data)}function arrayFill(startIndex,num,mixedVal){var key=void 0,arr=[];if(!isNaN(startIndex)&&!isNaN(num))for(key=0;num>key;key++)arr[key+startIndex]=mixedVal;return arr}function objToArray(obj){if(!Core.isObject(obj))return obj;if(!Object.keys(obj).every(function(key){return Core.isInteger(key)}))return obj;var array=[];return each(obj,function(value,i){array[i]=value}),array}function simpleOp(op,data,path){var values=arguments.length<=3||void 0===arguments[3]?null:arguments[3],length=path.length,last=length-1,list=data;return each(path,function(key,i){switch((Core.isNumeric(key)&&parseInt(key,10)>0||"0"===key)&&0!==key.indexOf("0")&&(key=parseInt(key,10)),op){case"insert":if(i===last)return list[key]=values,!1;null!=list[key]&&hasProp(list,key)||(list[key]={}),Core.isCollection(list[key])||(list[key]={}),list=list[key];break;case"remove":if(i===last)return delete list[key],!1;if(null==list[key]||!hasProp(list,key))return!1;list=list[key]}}),data}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasProp=hasProp,exports.clone=clone,exports.merge=merge,exports.each=each,exports.arrayCombine=arrayCombine,exports.arrayFill=arrayFill,exports.objToArray=objToArray,exports.simpleOp=simpleOp;var _core=require("./core"),Core=_interopRequireWildcard(_core)},{"./core":13}],13:[function(require,module,exports){"use strict";function _typeof(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function getType(obj){return null==obj?obj+"":"object"===("undefined"==typeof obj?"undefined":_typeof(obj))||"function"==typeof obj?classTypes[Object.prototype.toString.call(obj)]||"object":"undefined"==typeof obj?"undefined":_typeof(obj)}function isArray(obj){return Array.isArray(obj)}function isObject(obj){return!isArray(obj)&&"object"===getType(obj)}function isNumber(obj){return"number"===getType(obj)}function isString(obj){return"string"===getType(obj)}function isBoolean(obj){return"boolean"===getType(obj)}function isCollection(obj){return isArray(obj)||isObject(obj)}function isNumeric(obj){var type=getType(obj);return("number"===type||"string"===type)&&obj-parseFloat(obj)+1>=0}function isInteger(obj){var type=getType(obj);return("number"===type||"string"===type)&&/^([1-9]\d*|0)$/.test(obj)}function empty(obj){return isArray(obj)?0===obj.length:isObject(obj)?0===Object.keys(obj).length:isNumeric(obj)?0===parseFloat(obj):!obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getType=getType,exports.isArray=isArray,exports.isObject=isObject,exports.isNumber=isNumber,exports.isString=isString,exports.isBoolean=isBoolean,exports.isCollection=isCollection,exports.isNumeric=isNumeric,exports.isInteger=isInteger,exports.empty=empty;var classTypeList=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Symbol"],classTypes={};classTypeList.forEach(function(name){classTypes["[object "+name+"]"]=name.toLowerCase()})},{}],14:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function trim(input){return input.replace(/^\s+|\s+$/g,"")}function tokenize(str){var separator=arguments.length<=1||void 0===arguments[1]?",":arguments[1],left=arguments.length<=2||void 0===arguments[2]?"(":arguments[2],right=arguments.length<=3||void 0===arguments[3]?")":arguments[3];if(Core.empty(str))return[];for(var depth=0,offset=0,buffer="",results=[],length=str.length,open=!1;length>=offset;){for(var tmpOffset=-1,offsets=[str.indexOf(separator,offset),str.indexOf(left,offset),str.indexOf(right,offset)],i=0;3>i;i++)-1!==offsets[i]&&(offsets[i]<tmpOffset||-1===tmpOffset)&&(tmpOffset=offsets[i]);if(-1!==tmpOffset){buffer+=str.substr(offset,tmpOffset-offset);var char=str.substr(tmpOffset,1);depth||char!==separator?buffer+=char:(results.push(buffer),buffer=""),left!==right?(char===left&&depth++,char===right&&depth--):char===left&&(open?depth--:(depth++,open=!0)),offset=++tmpOffset}else results.push(buffer+str.substr(offset)),offset=length+1}return Core.empty(results)&&!Core.empty(buffer)&&results.push(buffer),Core.empty(results)?[]:results.map(function(val){return trim(val)})}function splitConditions(token){var conditions=!1,position=token.indexOf("[");return position>-1&&(conditions=token.substr(position),token=token.substr(0,position)),[token,conditions]}function matchToken(key,token){switch(token){case"{n}":return Core.isNumeric(key);case"{s}":return Core.isString(key);case"{*}":return!0;default:return Core.isNumeric(token)?key==token:key===token}}function matches(data,selector){for(var identifier="(?:\\\\.|[\\w-_.]|[^\\x00-\\xa0])+",attributes=new RegExp("\\s*("+identifier+")(?:\\s*([><!]?[=]|[><])\\s*(\\/.*?\\/|"+identifier+")|)\\s*]","g"),cond=void 0;cond=attributes.exec(selector);){var attr=cond[1],op=cond[2]||null,val=cond[3]||null,hasProperty=Collection.hasProp(data,attr);if(Core.empty(op)&&Core.empty(val)&&!hasProperty)return!1;if(!hasProperty&&null==data[attr])return!1;var prop=hasProperty?prop=data[attr]:void 0,_isBoolean=Core.isBoolean(prop)||"true"===prop||"false"===prop;if(_isBoolean&&Core.isNumeric(val)?prop=prop?"1":"0":_isBoolean&&(prop=prop?"true":"false"),"="===op&&val&&"/"===val[0]&&"/"===val[val.length-1]){if(prop=Core.isString(prop)||Core.isNumeric(prop)?prop:"",!new RegExp(val.substr(1,val.length-2)).test(prop))return!1}else if("="===op&&prop!=val||"!="===op&&prop==val||">"===op&&val>=prop||"<"===op&&prop>=val||">="===op&&val>prop||"<="===op&&prop>val)return!1}return!0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.trim=trim,exports.tokenize=tokenize,exports.splitConditions=splitConditions,exports.matchToken=matchToken,exports.matches=matches;var _core=require("./core"),Core=_interopRequireWildcard(_core),_collection=require("./collection"),Collection=_interopRequireWildcard(_collection)},{"./collection":12,"./core":13}]},{},[1]);